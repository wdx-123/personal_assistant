mysql:
  host: ""       # 宿主机本地访问 MySQL
  port: 3306
  config: charset=utf8mb4&parseTime=True&loc=Local
  db_name: meta_assist
  username: root
  password: ""
  max_idle_conns: 10    # 连接池空闲最大连接数
  max_open_conns: 100   # 连接池最大打开连接数
  log_mode: silent        # 日志级别
redis:
  address: ""  # 宿主机本地访问 Redis
  password: ""             # Redis 密码（默认）
  db: 0                    # 使用第 0 个数据库
system:
  host: 0.0.0.0 # 监听所有本地网卡；外部访问用机器实际IP
  port: 8002 # 服务对外暴露的端口号
  env: dev # 应用运行环境（release=生产环境；dev=开发环境；test=测试环境等）
  router_prefix: controller # API 接口的统一前缀（所有接口路径会以 /controller 开头）
  auto_migrate: true
  use_multipoint: true # 是否启用"多点"能力（如多客户端连接、多节点通信等场景）
  sessions_secret: "" # Session 加密/签名的密钥（保障会话安全）
  default_role_code: "user" # 新用户注册时的默认角色代码
  default_role_name: "普通用户" # 默认角色的显示名称
  bind_cool_down_hours: 48 # 换绑冷却时间（小时），防止频繁换绑
zap:
  level: warn #  日志级别为error：仅记录错误信息，不包含info和debug信息
  filename: log/go_blog.log # 日志文件存储路径及名称：日志会写入项目根目录下的log文件夹，文件名为go_blog.log，便于统一管理和查找
  max_size: 200 # 单个日志文件最大容量为200MB（依赖lumberjack库）：当文件达到200MB时自动切割为旧日志（如go_blog.log.1），避免单文件过大导致查看/备份困难
  max_backups: 30 # 最多保留30个旧日志文件（依赖lumberjack库）：超过30个时自动删除最旧的日志，防止历史日志占用过多磁盘空间
  max_age: 5 # 旧日志文件最多保留5天（依赖lumberjack库）：无论文件是否达到max_backups数量，超过5天的旧日志都会自动清理，控制日志存储周期
  is_console_print: true # 开启控制台日志输出：日志会同时写入文件和打印到终端（如终端窗口），方便开发时实时查看日志，生产环境可设为false仅保留文件日志
# JWT 认证配置
jwt:
  access_token_secret: a8f5f167f44f4964e6c998dee827110c3b2e5a8b5d2f8e4c9a1b3d7f6e0c2a4b  # 访问令牌密钥，用于签名和验证访问令牌
  refresh_token_secret: b9e6e278e55e5a75f7d099eff938221d4c3f6b9c6e3f9f5d0a2c4e8g7f1d3b5c  # 刷新令牌密钥，用于签名和验证刷新令牌
  access_token_expiry_time: 15m   # 访问令牌过期时间，2小时后需要刷新
  refresh_token_expiry_time: 15d  # 刷新令牌过期时间，7天后需要重新登录
  issuer: go_blog system               # JWT 发行者标识，用于标识令牌的发行方

# 文件上传配置
upload:
  size: 20      # 文件上传大小限制，单位MB
  path: uploads # 文件上传保存路径

# 验证码配置
captcha:
  height: 80     # 验证码图片高度，单位像素
  width: 240     # 验证码图片宽度，单位像素
  length: 6      # 验证码字符长度
  max_skew: 0.7  # 字符最大倾斜度，用于增加识别难度
  dot_count: 80  # 干扰点数量，用于防止机器识别

# 邮件发送配置
email:
  host: smtp.qq.com          # SMTP 服务器地址
  port: 465                  # SMTP 服务器端口号
  from: ""  # 发件人邮箱地址
  nickname: 十二         # 发件人显示名称
  secret: ""   # 邮箱授权码或密码
  is_ssl: true               # 是否使用SSL加密连接

# 高德地图API配置
gaode:
  enable: false                           # 是否启用高德地图功能
  key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx   # 高德地图API密钥

# 个人网站的配置
website:
  logo: ""                                    # 网站小图标/Logo，用于浏览器标签页显示
  full_logo: ""                               # 网站完整Logo，用于页面头部显示
  title: 十二的个人博客                  # 网站标题，显示在浏览器标题栏
  slogan: 博客标题                             # 网站中文标语/口号
  slogan_en: Blog Title                       # 网站英文标语/口号
  description: 博客描述                        # 网站描述，用于SEO和页面介绍
  version: 1.0.0                             # 网站版本号
  created_at: "2025-1-15"                    # 网站创建日期
  icp_filing: icp备案号                       # ICP备案号，中国大陆网站必需
  public_security_filing: 公安备案号            # 公安备案号，中国大陆网站必需
  bilibili_url: https://space.bilibili.com/xxx  # B站个人主页链接
  gitee_url: https://gitee.com/xxx           # Gitee个人主页链接
  github_url: https://github.com/xxx/        # GitHub个人主页链接
  blog_url: https://blog.xxx.com             # 个人博客网站链接
  name: 十二                                  # 博主昵称/姓名
  job: 学生                                   # 博主职业/工作
  address: 很神秘的哦                               # 博主所在地址
  email: w13839575053@qq.com                 # 博主联系邮箱
  qq_image: ""                               # QQ二维码图片路径
  wechat_image: ""                           # 微信二维码图片路径

# 存储驱动配置
storage:
  current: "qiniu"   # 默认驱动：local 或 qiniu
  local:
    base_url: ""      # 为空时复用 system.host + static.prefix
    key_prefix: ""    # 对象键前缀（可选）
  qiniu:
    bucket: "wdx89"        # 七牛空间名（对应“空间管理”中的“wdx89”）
    domain: "http://t4vpotpd5.hn-bkt.clouddn.com"        # 访问域名（从文件链接提取，七牛测试域名）
    key_prefix: ""    # 对象键前缀（可选）
    access_key: ""  # AK（可用环境变量覆盖）
    secret_key: ""  # SK（可用环境变量覆盖）
# 静态文件配置
static:
  path: "./static/images"
  prefix: "/images"
  max_size: 16
  max_uploads: 15
  allowed_types:
    - ".png"
    - ".jpeg"
    - ".gif"
    - ".jpg"
    - ".bin"

# 爬虫服务配置 (Infrastructure)
crawler:
  leetcode:
    base_url: "http://180.184.87.86:8001"    # 力扣数据服务地址 (FastAPI/Python 服务)
    timeout_ms: 10000                         # 单次请求超时时间 (毫秒)，建议 3000-10000
    max_idle_conns: 100                      # 连接池最大空闲连接数 (全局)
    max_idle_conns_per_host: 40             # 连接池单 Host 最大空闲连接数 (重要：高并发复用关键)
    idle_conn_timeout_sec: 90                # 空闲连接保持时间 (秒)
    retry_count: 2                           # 失败重试次数 (仅限网络错误/503等)
    retry_wait_ms: 200                       # 重试基础等待时间 (毫秒)
    retry_max_wait_ms: 2000                  # 重试最大等待时间 (毫秒)
    response_body_limit_bytes: 2097152       # 响应体大小限制 (字节)，默认 2MB，防止大包攻击
  luogu:
    base_url: "http://180.184.87.86:8001"    # 洛谷数据服务地址
    timeout_ms: 8000                         # 洛谷页面较慢，超时设长一点
    max_idle_conns: 200
    max_idle_conns_per_host: 100
    idle_conn_timeout_sec: 90
    retry_count: 2
    retry_wait_ms: 200
    retry_max_wait_ms: 2000
    response_body_limit_bytes: 4194304       # 洛谷题目内容可能较多，放宽到 4MB
task:
  outbox_cleanup_retention_days: 7
  luogu_question_bank_warmup_enabled: true
  luogu_question_bank_warmup_batch_size: 500
  luogu_question_bank_warmup_lock_ttl_seconds: 300
  luogu_sync_user_interval_seconds: 10
  ranking_sync_interval_seconds: 3600
messaging:
  redis_stream_read_count: 1
  redis_stream_block_ms: 5000
  luogu_bind_topic: "luogu.bind"
  luogu_bind_group: "luogu_bind_group"
  luogu_bind_consumer: "luogu_bind_consumer"
